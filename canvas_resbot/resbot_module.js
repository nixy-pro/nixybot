const _0x41ded8=_0x369b;(function(_0x5bd8c3,_0x3e21d3){const _0x24c31e=_0x369b,_0x25de1e=_0x5bd8c3();while(!![]){try{const _0x4c4a46=-parseInt(_0x24c31e(0x18b))/0x1*(-parseInt(_0x24c31e(0x15d))/0x2)+-parseInt(_0x24c31e(0x15b))/0x3*(-parseInt(_0x24c31e(0x16a))/0x4)+parseInt(_0x24c31e(0x159))/0x5*(parseInt(_0x24c31e(0x187))/0x6)+parseInt(_0x24c31e(0x181))/0x7+parseInt(_0x24c31e(0x180))/0x8*(-parseInt(_0x24c31e(0x16f))/0x9)+parseInt(_0x24c31e(0x15a))/0xa*(parseInt(_0x24c31e(0x175))/0xb)+-parseInt(_0x24c31e(0x185))/0xc;if(_0x4c4a46===_0x3e21d3)break;else _0x25de1e['push'](_0x25de1e['shift']());}catch(_0x4cf9e2){_0x25de1e['push'](_0x25de1e['shift']());}}}(_0x1b89,0x32afc));const {createCanvas,registerFont,loadImage}=require('canvas'),path=require(_0x41ded8(0x154)),fs2=require('fs'),fs=require('fs')['promises'],axios=require(_0x41ded8(0x16c)),moment=require(_0x41ded8(0x15f)),zonaWaktuIndonesia='Asia/Jakarta',waktuSekarangIndonesia=moment()['tz'](zonaWaktuIndonesia);waktuSekarangIndonesia['locale']('id');const formatTanggal=waktuSekarangIndonesia[_0x41ded8(0x186)](_0x41ded8(0x177));async function getImageAndSaveToTempFile(_0x3a2d3a){const _0x2f411b=_0x41ded8;try{const _0x3a3ca7=await getImageBufferFromURL(_0x3a2d3a),_0xf9d36b=await saveBufferToTempFile(_0x3a3ca7);return _0xf9d36b;}catch(_0x45ca4e){console[_0x2f411b(0x152)](_0x2f411b(0x155),_0x45ca4e);throw _0x45ca4e;}}async function getImageBufferFromURL(_0x29469f){const _0xf33276=_0x41ded8;try{const _0x3023cd=await axios[_0xf33276(0x166)](_0x29469f,{'responseType':_0xf33276(0x18c)}),_0x561bc0=Buffer[_0xf33276(0x15c)](_0x3023cd[_0xf33276(0x174)],'binary');return _0x561bc0;}catch(_0x5cbc13){console[_0xf33276(0x152)](_0xf33276(0x171),_0x5cbc13);throw _0x5cbc13;}}async function saveBufferToTempFile(_0x3c5fba){const _0x1d4d6e=_0x41ded8;try{const _0x28e0cd=_0x1d4d6e(0x167),_0x5972fb=path['join'](__dirname,_0x28e0cd);await fs['mkdir'](_0x5972fb,{'recursive':!![]});const _0x51d7aa=path[_0x1d4d6e(0x17b)](_0x5972fb,'tempfile_'+Date[_0x1d4d6e(0x182)]()+_0x1d4d6e(0x18d));return await fs[_0x1d4d6e(0x169)](_0x51d7aa,_0x3c5fba),_0x51d7aa;}catch(_0x3539ac){console['error'](_0x1d4d6e(0x183),_0x3539ac);throw _0x3539ac;}}async function generateImage(_0x1b89aa,_0x340b86,_0x1dae43){const _0x13bd36=_0x41ded8;try{if(!_0x1b89aa||!_0x340b86)return console['log'](_0x13bd36(0x15e));_0x1b89aa['length']>0x12&&(_0x1b89aa=_0x1b89aa[_0x13bd36(0x168)](0x0,0x12));const _0x2119bb=await getImageAndSaveToTempFile(_0x340b86),_0x5b5145=formatTanggal;registerFont(path[_0x13bd36(0x17a)](__dirname,'LEMONMILK-Bold.otf'),{'family':_0x13bd36(0x16b)});const _0x115444=0x500,_0x22c8fc=0x2d0,_0x1b173d=createCanvas(_0x115444,_0x22c8fc),_0x73a21e=_0x1b173d[_0x13bd36(0x18e)]('2d'),_0x36e0f8=await loadImage(path[_0x13bd36(0x17a)](__dirname,'./'+_0x1dae43));_0x73a21e[_0x13bd36(0x160)](_0x36e0f8,0x0,0x0,_0x115444,_0x22c8fc);const _0x2b515b=0x0,_0x1ffc67=-0x47,_0xd0b353=0xdc,_0x5d775f=(_0x115444-_0xd0b353*0x2)/0x2+_0x2b515b,_0x25920f=(_0x22c8fc-_0xd0b353*0x2)/0x2+_0x1ffc67;_0x73a21e[_0x13bd36(0x179)](),_0x73a21e[_0x13bd36(0x176)](),_0x73a21e[_0x13bd36(0x18a)](_0x5d775f+_0xd0b353,_0x25920f+_0xd0b353,_0xd0b353,0x0,Math['PI']*0x2,!![]),_0x73a21e[_0x13bd36(0x189)](),_0x73a21e[_0x13bd36(0x17d)]();const _0x7e7a14=await loadImage(path[_0x13bd36(0x17a)](__dirname,_0x2119bb));_0x73a21e[_0x13bd36(0x160)](_0x7e7a14,_0x5d775f,_0x25920f,_0xd0b353*0x2,_0xd0b353*0x2),_0x73a21e[_0x13bd36(0x170)](),_0x73a21e[_0x13bd36(0x17e)]=_0x13bd36(0x17f),_0x73a21e[_0x13bd36(0x158)]=_0x13bd36(0x163),_0x73a21e[_0x13bd36(0x184)]=_0x13bd36(0x157),_0x73a21e[_0x13bd36(0x172)]=0x2,_0x73a21e[_0x13bd36(0x191)]=_0x13bd36(0x190),_0x73a21e['strokeText'](''+_0x1b89aa,0x280,0x278),_0x73a21e[_0x13bd36(0x16d)](''+_0x1b89aa,0x280,0x278),await fs[_0x13bd36(0x153)](_0x2119bb);const _0x8103c9=_0x1b173d[_0x13bd36(0x165)](_0x13bd36(0x164));return _0x8103c9;}catch(_0x265479){return console[_0x13bd36(0x152)](_0x265479);}}function _0x369b(_0x38eb1a,_0x54b515){const _0x1b8953=_0x1b89();return _0x369b=function(_0x369b1a,_0xa84009){_0x369b1a=_0x369b1a-0x152;let _0x2c2de6=_0x1b8953[_0x369b1a];return _0x2c2de6;},_0x369b(_0x38eb1a,_0x54b515);}async function smeme(_0x3c9452,_0x5c01de){const _0x50c707=_0x41ded8;try{if(!_0x3c9452||!_0x5c01de)return console[_0x50c707(0x156)]('Enter\x20valid\x20parameters\x20(text,\x20pp)');const _0x589088=await getImageAndSaveToTempFile(_0x5c01de),_0x778011=await loadImage(path[_0x50c707(0x17a)](__dirname,_0x589088));registerFont(path[_0x50c707(0x17a)](__dirname,_0x50c707(0x17c)),{'family':'LEMONMILK'});const _0x19c040=0x500,_0x3e18e9=0x500,_0x3655e8=createCanvas(_0x19c040,_0x3e18e9),_0x1b1aaa=_0x3655e8[_0x50c707(0x18e)]('2d');_0x1b1aaa[_0x50c707(0x160)](_0x778011,0x0,0x0,_0x19c040,_0x3e18e9);const _0x2a1834=0x64,_0x318c47='LEMONMILK',_0x347f2a=_0x50c707(0x163),_0x4fb39a=_0x50c707(0x157);_0x1b1aaa[_0x50c707(0x17e)]=_0x2a1834+'px\x20'+_0x318c47;const _0x4511af=_0x1b1aaa[_0x50c707(0x161)](_0x3c9452)[_0x50c707(0x173)],_0x21efad=_0x19c040/0x2;let _0x493754=_0x2a1834+0x14;const _0x521c19=_0x19c040-0x28;let _0x48efbb=_0x3c9452[_0x50c707(0x16e)]('\x20'),_0x5905f1='',_0x1b1fbf=[];for(let _0x42f612 of _0x48efbb){let _0x2ad4d8=_0x5905f1+_0x42f612+'\x20',_0x2794ac=_0x1b1aaa[_0x50c707(0x161)](_0x2ad4d8)[_0x50c707(0x173)];_0x2794ac>_0x521c19?(_0x1b1fbf[_0x50c707(0x162)](_0x5905f1),_0x5905f1=_0x42f612+'\x20'):_0x5905f1=_0x2ad4d8;}_0x1b1fbf[_0x50c707(0x162)](_0x5905f1),_0x1b1aaa[_0x50c707(0x184)]=_0x4fb39a,_0x1b1aaa['lineWidth']=0x4,_0x1b1aaa['textAlign']=_0x50c707(0x190),_0x1b1aaa['fillStyle']=_0x347f2a;for(let _0x3d63d4 of _0x1b1fbf){_0x1b1aaa[_0x50c707(0x178)](_0x3d63d4[_0x50c707(0x18f)](),_0x21efad,_0x493754),_0x1b1aaa[_0x50c707(0x16d)](_0x3d63d4['trim'](),_0x21efad,_0x493754),_0x493754+=_0x2a1834*1.2;}await fs[_0x50c707(0x153)](_0x589088);const _0x456d5b=_0x3655e8['toBuffer'](_0x50c707(0x164));return _0x456d5b;}catch(_0x467d18){console[_0x50c707(0x152)](_0x467d18);}}module[_0x41ded8(0x188)]={'generateImage':generateImage,'smeme':smeme};function _0x1b89(){const _0x1b85ed=['resolve','join','LEMONMILK-Bold.otf','clip','font','55px\x20\x22LEMONMILK\x22','144AICOnx','933422ZiyMgb','now','Error\x20saving\x20buffer\x20to\x20temp\x20file:','strokeStyle','5450364SQqYre','format','271032vsuyft','exports','closePath','arc','222293IwldMO','arraybuffer','.jpg','getContext','trim','center','textAlign','error','unlink','path','Error\x20getting\x20image\x20and\x20saving\x20to\x20temp\x20file:','log','#000000','fillStyle','5NQmPDh','560mGqcPJ','9264xFNqYh','from','2IdEFqk','Enter\x20valid\x20parameters\x20(name,\x20pp)','moment-timezone','drawImage','measureText','push','#ffffff','image/png','toBuffer','get','/tmp','substring','writeFile','36SUNOST','LEMONMILK','axios','fillText','split','23481pjvTcy','restore','Error\x20fetching\x20image:','lineWidth','width','data','55033iTLQEM','beginPath','D\x20MMMM\x20YYYY','strokeText','save'];_0x1b89=function(){return _0x1b85ed;};return _0x1b89();}